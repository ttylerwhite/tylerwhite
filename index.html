<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tyler White | REALTOR¬Æ</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-in { animation: fadeIn 0.4s ease-out forwards; }
        body { font-family: sans-serif; }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICON REPLACEMENTS (CRASH-PROOF EMOJIS) ---
        // This fixes the blank page error by removing the external library dependency
        const Calculator = () => <span className="text-xl">üßÆ</span>;
        const CheckSquare = () => <span className="text-xl">‚òëÔ∏è</span>;
        const HelpCircle = () => <span className="text-xl">‚ùì</span>;
        const BookOpen = () => <span className="text-xl">üìñ</span>;
        const Home = () => <span className="text-xl">üè†</span>;
        const Phone = () => <span className="text-xl">üìû</span>;
        const Mail = () => <span className="text-xl">‚úâÔ∏è</span>;
        const MapPin = () => <span className="text-xl">üìç</span>;
        const DollarSign = () => <span className="text-xl">üí≤</span>;
        const Sparkles = () => <span className="text-xl">‚ú®</span>;
        const User = () => <span className="text-xl">üë§</span>;
        const Star = () => <span className="text-xl">‚≠ê</span>;
        const Quote = () => <span className="text-xl">üí¨</span>;
        const ArrowRight = () => <span className="text-xl">‚û°Ô∏è</span>;
        const ChevronDown = () => <span>‚ñº</span>;
        const ChevronUp = () => <span>‚ñ≤</span>;
        const Send = () => <span>üì§</span>;
        const Loader = () => <span>‚è≥</span>;
        const MessageSquare = () => <span>üí¨</span>;
        const Globe = () => <span>üåê</span>;
        const FileText = () => <span>üìÑ</span>;

        // --- YOUR DATA & CONSTANTS ---

        const NB_TAX_RATE = 0.01;
        const AVG_LEGAL_FEE = 1200;
        const REGISTRATION_FEE = 170;
        const INSPECTION_EST = 500;

        const CHECKLISTS = {
            preApproval: [
                { id: 1, text: "Check credit score and correct errors" },
                { id: 2, text: "Gather income verification (T4s, pay stubs)" },
                { id: 3, text: "Determine down payment amount (5%, 10%, 20%)" },
                { id: 4, text: "Calculate monthly budget for mortgage + utilities" },
                { id: 5, text: "Meet with a mortgage broker or lender" },
                { id: 6, text: "Get Pre-Approval Letter" }
            ],
            hunting: [
                { id: 1, text: "Define 'Must-Haves' vs 'Nice-to-Haves'" },
                { id: 2, text: "Choose target neighbourhoods in Quispamsis/Rothesay/Saint John" },
                { id: 3, text: "Sign representation agreement with your REALTOR¬Æ" },
                { id: 4, text: "View properties in person" },
                { id: 5, text: "Check school zones and commute times" },
                { id: 6, text: "Review property disclosures" }
            ],
            closing: [
                { id: 1, text: "Secure home insurance (binder required by lender)" },
                { id: 2, text: "Transfer utilities (NB Power, Internet, Water)" },
                { id: 3, text: "Book moving truck or company" },
                { id: 4, text: "Review final closing statement from lawyer" },
                { id: 5, text: "Get bank draft for closing costs" },
                { id: 6, text: "Final walkthrough of the property" },
                { id: 7, text: "Pick up keys!" }
            ]
        };

        const FAQS = [
            { question: "Difference between deposit and down payment?", answer: "A deposit is paid when your offer is accepted (held in trust). A down payment is the total cash paid at closing. The deposit counts towards the down payment." },
            { question: "What are closing costs?", answer: "Fees paid on closing day. In NB, this includes Land Transfer Tax (1%), legal fees, and adjustments. Budget 1.5% - 2.5% of the price." },
            { question: "Why do I need a REALTOR¬Æ?", answer: "To protect your interests, negotiate on your behalf, and access the MLS¬Æ system. It helps you avoid legal pitfalls." }
        ];

        const TESTIMONIALS = [
            { text: "We sincerely want to thank you, Tyler... You truly listened, were attentive and open to our wishes...", author: "–Ü—Ä–∏–Ω–∞ –î–∞–Ω–∏–ª—é–∫" },
            { text: "Tyler, you're a caring and passionate person... YOU WILL NOT BE DISAPPOINTED!!", author: "P & H Albert" }
        ];

        const GLOSSARY = [
            { term: "Amortization", def: "Length of time to pay off a mortgage in full (usually 25 years)." },
            { term: "Closing Date", def: "Date the sale becomes final and you take possession." },
            { term: "MLS¬Æ System", def: "Multiple Listing Service¬Æ. The system used by REALTORS¬Æ to list properties." }
        ];

        // --- GEMINI API FUNCTION ---
        const callGemini = async (prompt, systemInstruction = "") => {
            const apiKey = ""; // *** PASTE KEY HERE IF YOU HAVE IT ***
            
            if (!apiKey) return "Please add a Gemini API Key in the code to use the AI features.";

            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }],
                        systemInstruction: { parts: [{ text: systemInstruction }] }
                    })
                });
                if (!response.ok) throw new Error("API Error");
                const data = await response.json();
                return data.candidates?.[0]?.content?.parts?.[0]?.text || "No response generated.";
            } catch (e) {
                return "I'm having trouble connecting to the AI right now.";
            }
        };

        // --- COMPONENTS ---

        const Header = ({ setView }) => (
            <header className="bg-slate-900 text-white p-6 shadow-lg sticky top-0 z-50">
                <div className="max-w-4xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
                    <div className="text-center md:text-left cursor-pointer" onClick={() => setView('home')}>
                        <h1 className="text-2xl font-bold flex items-center justify-center md:justify-start gap-2 hover:text-blue-300">
                            <Home /> Home Buyer's Hub
                        </h1>
                        <p className="text-slate-400 text-sm mt-1">Tyler White, REALTOR¬Æ ‚Ä¢ EXIT Realty Specialists</p>
                    </div>
                    <div className="flex gap-2">
                        <a href="tel:5148163997" className="p-2 bg-slate-800 rounded hover:bg-green-600">Call</a>
                        <a href="mailto:tyler@exitsj.ca" className="p-2 bg-slate-800 rounded hover:bg-blue-600">Email</a>
                    </div>
                </div>
            </header>
        );

        const NavButton = ({ icon: Icon, label, active, onClick, special }) => (
            <button onClick={onClick} className={`flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all ${active ? 'bg-blue-50 border-blue-500 text-blue-700' : 'bg-white border-slate-100 text-slate-600'}`}>
                <div className="mb-1"><Icon /></div>
                <span className="font-medium text-xs">{label}</span>
            </button>
        );

        const CalculatorTab = () => {
            const [price, setPrice] = useState(450000);
            const [downPct, setDownPct] = useState(5);
            const downAmt = price * (downPct / 100);
            const mortgage = price - downAmt;
            const landTax = price * NB_TAX_RATE;
            const totalCash = landTax + AVG_LEGAL_FEE + REGISTRATION_FEE + INSPECTION_EST + downAmt + 500;

            return (
                <div className="space-y-6">
                    <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                        <h3 className="text-lg font-bold mb-4 flex gap-2"><Calculator /> Payment Estimator</h3>
                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm font-bold text-slate-700">Home Price</label>
                                <input type="number" value={price} onChange={e => setPrice(Number(e.target.value))} className="w-full p-2 border rounded" />
                            </div>
                            <div>
                                <label className="block text-sm font-bold text-slate-700">Down Payment (%)</label>
                                <input type="number" value={downPct} onChange={e => setDownPct(Number(e.target.value))} className="w-full p-2 border rounded" />
                            </div>
                            <div className="p-4 bg-blue-50 rounded text-center">
                                <p className="text-blue-900 font-bold">Total Cash Needed to Close</p>
                                <p className="text-2xl font-bold text-blue-700">${totalCash.toLocaleString()}</p>
                                <p className="text-xs text-blue-600 mt-1">(Includes Down Payment + NB Closing Costs)</p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const ChecklistsTab = () => {
            const [checked, setChecked] = useState({});
            const toggle = (t) => setChecked(p => ({...p, [t]: !p[t]}));

            return (
                <div className="max-w-2xl mx-auto space-y-6">
                    <div className="bg-white p-6 rounded-xl border border-slate-200">
                        <h3 className="font-bold mb-4">1. Getting Mortgage Ready</h3>
                        {CHECKLISTS.preApproval.map(i => (
                            <div key={i.id} onClick={() => toggle(i.text)} className="flex gap-3 p-2 cursor-pointer hover:bg-slate-50">
                                <div>{checked[i.text] ? <span className="text-blue-600">‚òëÔ∏è</span> : <span className="text-slate-300">‚¨ú</span>}</div>
                                <span className={checked[i.text] ? "line-through text-slate-400" : "text-slate-700"}>{i.text}</span>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const AiAssistantTab = () => {
            const [q, setQ] = useState("");
            const [ans, setAns] = useState(null);
            const [loading, setLoading] = useState(false);

            const ask = async () => {
                if(!q) return;
                setLoading(true);
                const res = await callGemini(q, "You are a friendly REALTOR assistant for Tyler White in Saint John NB.");
                setAns(res);
                setLoading(false);
            };

            return (
                <div className="bg-white p-6 rounded-2xl border border-slate-200">
                    <h3 className="font-bold flex gap-2 mb-4"><Sparkles /> Ask AI Assistant</h3>
                    <textarea value={q} onChange={e => setQ(e.target.value)} placeholder="Ask about closing costs, schools, etc..." className="w-full p-3 border rounded mb-3 h-32"></textarea>
                    <button onClick={ask} disabled={loading} className="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 w-full">
                        {loading ? "Thinking..." : "Ask Question"}
                    </button>
                    {ans && <div className="mt-4 p-4 bg-slate-50 rounded border border-slate-200 text-slate-700 whitespace-pre-wrap">{ans}</div>}
                </div>
            );
        };

        const AboutTab = () => (
            <div className="bg-white p-8 rounded-2xl border border-slate-200 text-center">
                <div className="w-24 h-24 bg-slate-200 rounded-full mx-auto mb-4 flex items-center justify-center text-4xl">üë§</div>
                <h2 className="text-2xl font-bold">Tyler White</h2>
                <p className="text-blue-600 font-bold mb-4">REALTOR¬Æ ‚Ä¢ EXIT Realty Specialists</p>
                <div className="grid gap-3 max-w-sm mx-auto">
                    <a href="tel:5148163997" className="p-3 bg-green-600 text-white rounded font-bold">Call (514) 816-3997</a>
                    <a href="mailto:tyler@exitsj.ca" className="p-3 bg-slate-800 text-white rounded font-bold">Email tyler@exitsj.ca</a>
                    <a href="https://tylerwhite.ca" target="_blank" className="p-3 bg-blue-500 text-white rounded font-bold">Visit Website</a>
                </div>
            </div>
        );

        function HomeBuyerApp() {
            const [view, setView] = useState('home');
            
            return (
                <div className="min-h-screen pb-12">
                    <Header setView={setView} />
                    <main className="max-w-4xl mx-auto p-4">
                        <div className="grid grid-cols-5 gap-2 mb-6 overflow-x-auto">
                            <NavButton icon={Calculator} label="Calc" active={view === 'calc'} onClick={() => setView('calc')} />
                            <NavButton icon={CheckSquare} label="Lists" active={view === 'lists'} onClick={() => setView('lists')} />
                            <NavButton icon={HelpCircle} label="Info" active={view === 'info'} onClick={() => setView('info')} />
                            <NavButton icon={Sparkles} label="AI" active={view === 'ai'} onClick={() => setView('ai')} />
                            <NavButton icon={User} label="Contact" active={view === 'contact'} onClick={() => setView('contact')} />
                        </div>

                        <div className="animate-in">
                            {view === 'home' && (
                                <div className="text-center py-10">
                                    <h2 className="text-3xl font-bold text-slate-800 mb-4">Your Home Buying Journey</h2>
                                    <p className="text-slate-600 mb-8 max-w-lg mx-auto">Welcome to the hub! Use the tools above to budget, plan, and organize your move to Quispamsis or Saint John.</p>
                                    <button onClick={() => setView('contact')} className="bg-blue-600 text-white px-8 py-3 rounded-full font-bold shadow-lg hover:bg-blue-700">Get Started ‚û°Ô∏è</button>
                                </div>
                            )}
                            {view === 'calc' && <CalculatorTab />}
                            {view === 'lists' && <ChecklistsTab />}
                            {view === 'ai' && <AiAssistantTab />}
                            {view === 'contact' && <AboutTab />}
                            {view === 'info' && (
                                <div className="space-y-4">
                                    <h3 className="font-bold text-xl"><BookOpen /> Glossary & FAQ</h3>
                                    {FAQS.map((f, i) => (
                                        <div key={i} className="bg-white p-4 rounded border">
                                            <p className="font-bold text-blue-900">{f.question}</p>
                                            <p className="text-slate-600">{f.answer}</p>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<HomeBuyerApp />);
    </script>
</body>
</html>
